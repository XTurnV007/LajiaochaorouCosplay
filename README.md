# 迷雾剧场 - AI角色扮演探案网页

基于产品需求文档开发的AI角色扮演探案游戏，以《竹林之下》为剧本。

## 功能特点

- **真实AI对话**：集成七牛云AI模型，与4个不同性格的AI角色自由对话
- **语音交互**：支持语音输入问题和AI语音回复
- **图片交互调查**：点击案发现场图片的不同区域进行调查
- **证据系统**：收集和出示证据，观察嫌疑人的反应
- **智能推理**：AI角色会根据压力等级和证据改变回答
- **进度保存**：自动保存游戏进度，随时继续调查
- **结案指认**：完整的推理和指认系统

## 如何使用

1. 直接在浏览器中打开 `index.html` 文件
2. （可选）输入你的API密钥以启用真实AI和语音功能
3. 阅读案件陈述，了解基本情况
4. 开始调查：
   - **嫌疑人**：点击审问按钮与AI角色对话
   - **证物袋**：查看已发现的证据
   - **现场调查**：输入调查指令发现新线索
   - **结案指认**：完成推理后指认凶手

## 语音功能

- **语音输入**：点击🎤按钮录制问题，自动转换为文字
- **语音回复**：勾选"启用语音回复"，AI会朗读答案
- **停止播放**：点击🔇按钮停止当前语音

## 游戏玩法

### 审问技巧
- 自由输入问题，AI会根据角色性格回答
- 出示证据观察嫌疑人反应
- 注意每个人证词中的矛盾之处

### 现场调查 (图片交互)
- **点击交互**：直接点击案发现场图片中的不同区域
- **热点提示**：点击"显示提示"按钮查看可调查区域
- **视觉反馈**：已调查区域会变为绿色标记
- **调查内容**：尸体、断剑、竹林、地面、茶花丛等

### 胜利条件
正确指认出凶手并分析出作案手法和动机。每个角色都有自己的秘密和撒谎的理由，需要通过细致的调查和推理找出真相。

## 技术实现

- 纯前端实现，无需服务器
- 响应式设计，支持移动端
- 集成七牛云AI API (gpt-oss-120b模型)
- 语音识别 (ASR) 和语音合成 (TTS) 功能
- 动态证据系统和压力等级机制
- 降级机制：无API时使用本地AI逻辑

## API配置

详细的API配置说明请查看 `API_CONFIG.md` 文件。

- 对话API：`https://openai.qiniu.com/v1/chat/completions`
- 语音合成：`https://openai.qiniu.com/v1/voice/tts`
- 语音识别：`https://openai.qiniu.com/v1/voice/asr`

## 剧本背景

改编自芥川龙之介的《竹林中》，设定在平安时代的日本。一名武士在竹林中离奇死亡，四个相关人员给出了截然不同的证词。玩家需要扮演检非违使（古代检察官），通过审问和调查还原真相。