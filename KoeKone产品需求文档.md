# **产品需求文档 (PRD): 迷雾剧场 (Mist Theater) V1.0**

| **文档版本** | **V1.0** |
| :----------- | :----------------------------------------- |
| **创建日期** | 2025年9月23日                              |
| **创建人** | Product Manager                            |
| **文档状态** | 草稿 (Draft)                               |
| **产品代号** | MistTheater                                |

---

### **1. 背景与目标 (Introduction & Overview)**

#### **1.1. 项目背景**
剧本杀（Jubensha）作为一种新兴的线下社交娱乐方式，深受年轻用户喜爱。然而，其发展也面临着显著的瓶颈：
1.  **“凑人难”**：组织一场游戏需要找到指定数量、时间地点均合适的朋友，组织成本极高。
2.  **“DM 依赖”**：DM（游戏主持人）的专业水平直接决定了游戏体验的好坏，优质 DM 稀缺且成本高。
3.  **“时空限制”**：游戏必须在线下实体店进行，耗时较长（3-5小时），不符合碎片化的娱乐趋势。

本项目旨在利用大型语言模型（LLM）的推理和扮演能力，打造一款线上 AI 剧本杀平台，解决以上痛点，提供随时随地、任意人数即可开局的沉浸式推理体验。

#### **1.2. V1.0 (MVP) 产品目标**
验证 **“AI DM + AI NPC”** 的核心模式能否为玩家提供一场完整、流畅且具有沉浸感的剧本杀体验。我们不追求功能的广度，而追求核心体验的闭环与可行性。

---

### **2. 目标用户 (Target Audience)**

| 用户画像                 | 核心特征                                                     | 痛点与需求                                                                                             |
| :----------------------- | :----------------------------------------------------------- | :----------------------------------------------------------------------------------------------------- |
| **资深剧本杀爱好者** | 热爱推理，但对线下组局的困难感到厌烦。                       | **痛点：** 组局效率低，时间成本高。**需求：** 能够更频繁、更便捷地玩到高质量的剧本。                     |
| **小团体社交玩家** | 有 2-3 名固定好友，但总是凑不齐剧本要求的人数。              | **痛点：** 人数不足，无法体验心仪的剧本。**需求：** 一种能用 AI 填充空缺玩家位置的解决方案。               |
| **对剧本杀感兴趣的新手** | 听过剧本杀，但被线下店的高价格、长耗时和社交压力劝退。       | **痛点：** 尝试门槛高，担心自己不会玩影响他人。**需求：** 一个低成本、私密、有引导的入门方式。 |

---

### **3. 用户故事 (User Stories)**

1.  **作为** 一名资深玩家，**我希望** 能在只有两位朋友的情况下，立即开始一个 5 人剧本，由 AI 扮演剩下的两个角色，**以便** 我们不用再为了凑人而等上几周。
2.  **作为** 一名剧本杀新手，**我希望** AI DM 能够清晰地引导我进行每个游戏阶段，并能在我需要时提供规则提示，**以便** 我能快速上手，不拖累团队。
3.  **作为** 一名普通玩家，**我希望** 即使有玩家朋友中途掉线，他的角色也能由 AI 无缝接管，**以便** 保证整场游戏的顺利进行，不因意外而中断。

---

### **4. 功能范围与需求 (Scope & Features)**

#### **4.1. V1.0 产品范围**

* **IN SCOPE (范围之内):**
    * 提供 1 个经过精心设计的、适合 AI 扮演的 4 人剧本。
    * 支持 2-3 名真人玩家 + AI NPC 补位的模式。
    * 纯文本交互的 Web 端应用。
    * 由 AI DM 驱动核心游戏流程。
    * 基础的线索分发与管理。

* **OUT OF SCOPE (范围之外):**
    * 用户账户系统（V1.0 使用匿名房间制）。
    * 付费和剧本商城。
    * 语音聊天功能。
    * 玩家自定义 DM 或 NPC 行为。
    * 复杂的 UI 动效和美术资源。

#### **4.2. 功能详述 (Feature Breakdown)**

##### **F1: 游戏大厅 (Game Lobby)**
* **优先级:** P0
* **描述:** 玩家在游戏开始前进行准备和角色选择的区域。
* **需求:**
    1.  `FR1.1` 玩家可以创建游戏房间，并获得一个唯一的分享链接。
    2.  `FR1.2` 其他玩家通过链接加入房间。
    3.  `FR1.3` 房间内显示当前所有玩家（包括待加入的空位）。
    4.  `FR1.4` 房主可以选择用“AI NPC”填充空余位置。
    5.  `FR1.5` 所有玩家准备就绪后，由房主开始游戏，系统自动分配角色。

##### **F2: 核心游戏界面 (Gameplay Interface)**
* **优先级:** P0
* **描述:** 游戏的主要进行区域，整合了所有必要的信息和交互模块。
* **需求:**
    1.  `FR2.1` **主讨论区:** 所有玩家（包括 AI NPC）公开发言的区域。
    2.  `FR2.2` **DM 频道:** 一个只读频道，由 AI DM 在此发布阶段转换通知、计时、公共事件等。
    3.  `FR2.3` **私人频道:** 玩家可以向任何其他角色（真人或 AI）发起 1 对 1 私聊。
    4.  `FR2.4` **个人面板 (常驻):**
        * **我的剧本:** 随时查看自己的角色背景、任务目标。
        * **我的线索:** 查看自己搜查到的私有线索。
    5.  `FR2.5` **公共线索区:** 展示所有被公开的线索。玩家可以将自己的私有线索“公开”到此区域。
    6.  `FR2.6` **投票系统:** 在最终投票阶段，AI DM 发起投票，玩家点击角色头像进行指认。

##### **F3: AI DM (游戏主持人) 核心逻辑**
* **优先级:** P0
* **描述:** 驱动整个游戏流程的核心引擎。
* **需求:**
    1.  `FR3.1` **流程管理:** 能够自动按照“角色介绍 -> 搜证 -> 圆桌讨论 -> 投票”的剧本杀标准流程，推进游戏阶段。
    2.  `FR3.2` **事件触发:** 能够根据预设的剧本时间线或玩家行为，触发特定事件（例如“突然停电了”、“发现了新的尸体”）。
    3.  `FR3.3` **规则引导:** 能在玩家进行违规操作时（如讨论阶段自爆）进行温和提示。
    4.  `FR3.4` **信息分发:** 在游戏开始和搜证阶段，准确地将不同的剧本和私密线索分发给对应的角色。

##### **F4: AI NPC (非玩家角色) 核心逻辑**
* **优先级:** P0
* **描述:** 扮演除真人玩家外其他角色的 AI。
* **需求:**
    1.  `FR4.1` **角色一致性:** AI NPC 的所有发言和行为，必须严格遵守其被分配到的剧本设定（性格、背景、秘密任务）。
    2.  `FR4.2` **信息隔离:** AI NPC 只能基于“自己剧本中拥有的信息”和“公开讨论中获得的信息”进行发言和推理，严禁泄露剧本外的任何信息。
    3.  **主动性:** AI NPC 不能仅作为被动问答的机器人。它们需要具备主动性，例如：主动提出疑问、与其他角色（真人或AI）结盟、根据自己的任务进行欺骗或误导。
    4.  **推理与适应:** AI NPC 需要能理解其他玩家的发言和出示的线索，并动态调整自己的发言策略。

---

### **5. 非功能性需求 (Non-Functional Requirements)**

1.  **性能 (Performance):** AI 的文字回应时间应在 5 秒以内，保证对话的流畅性。
2.  **稳定性 (Stability):** AI DM 和 NPC 服务必须保证高可用性，单场游戏（预计 1-2 小时）期间不能宕机。
3.  **一致性 (Consistency):** AI NPC 在整场游戏中必须保持稳定的人设，不能前后矛盾或“失忆”。

---

### **6. 成功指标 (Success Metrics)**

1.  **游戏完成率 (Game Completion Rate):** 已开始的游戏中，最终正常结束（完成投票）的比例。**目标 > 80%**。
2.  **核心互动指标 (Engagement Metrics):** 平均每场游戏中，真人玩家与 AI NPC 的私聊次数。
3.  **用户满意度 (User Satisfaction):** 游戏结束后，弹出评分窗口，让玩家为本场 AI DM 和 AI NPC 的表现打分（1-5星）。**目标平均分 > 3.5**。

---

### **7. 假设与依赖 (Assumptions & Dependencies)**

1.  **核心假设:** 当前的 LLM 技术足以支撑在一场长达 1-2 小时的游戏中，维持多个人设的逻辑一致性和信息隔离。
2.  **核心依赖:**
    * 高度依赖一个结构化、对 AI 友好的剧本。剧本需要将角色的知识、目标、时间线等信息清晰地标签化，便于 AI 理解和执行。
    * 强依赖于 LLM 服务商 API 的稳定性和性能。

---

### **8. 修订历史 (Revision History)**

| 版本 | 日期          | 修订人          | 修订说明         |
| :--- | :------------ | :-------------- | :--------------- |
| 1.0  | 2025年9月23日 | Product Manager | 创建初始版本文档 |