# 迷雾剧场 - 竹林之下

基于《罗生门》的AI互动推理游戏，采用现代Web技术打造沉浸式剧本杀体验。

## 🎮 游戏简介

在平安时代的青竹林中，一桩离奇命案等待你的调查。四个截然不同的证词，每个人都在撒谎，真相只有一个。通过现场调查、审问嫌疑人，运用逻辑推理揭开竹林之下的唯一真实。

### 核心特色
- 🤖 **AI驱动对话**：与嫌疑人进行真实的AI对话，每次体验都不同
- 🗣️ **语音交互**：支持AI语音回复，沉浸式角色扮演体验
- 📱 **微信式聊天**：现代化的聊天界面，类似微信的用户体验
- 🕵️ **互动调查**：点击式现场调查，发现关键证物
- 📊 **情绪系统**：角色压力等级实时变化，影响审问效果
- 💾 **智能存档**：自动保存对话记录，支持跨session继续游戏

## 🚀 快速开始

### 环境要求
- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 本地Web服务器（推荐）

### 安装运行

#### 方法一：直接打开（简单）
```bash
# 1. 下载项目文件
git clone [项目地址]
cd LajiaochaorouCosplay

# 2. 直接用浏览器打开 index.html
open index.html  # macOS
start index.html # Windows
```

#### 方法二：本地服务器（推荐）
```bash
# 使用 Python
python -m http.server 8000
# 访问 http://localhost:8000

# 使用 Node.js
npx serve .
# 访问显示的地址

# 使用 PHP
php -S localhost:8000
# 访问 http://localhost:8000
```

### 配置说明

#### AI功能配置（可选）
1. 点击封面页的"设置"按钮
2. 输入你的API密钥（七牛云或兼容OpenAI的API）
3. 点击"保存设置"

**默认配置**：
- API地址：`https://openai.qiniu.com/v1`
- 模型：`gpt-oss-120b`
- 内置API密钥（有限额度）

#### 语音功能
- 在审问界面勾选"启用语音回复"
- 需要配置有效的API密钥
- 支持角色专属音色

## 🎯 游戏攻略

### 基本流程
1. **现场调查**：点击案发现场图片的不同区域收集证物
2. **审问嫌疑人**：与四个角色对话，寻找矛盾点
3. **出示证据**：在审问中出示相关证物施加压力
4. **推理结案**：整理线索，指认真凶并分析手法动机

### 破案关键
- **真凶**：大盗"鬼武"
- **手法关键词**：失手、混乱、推搡、意外、争斗、酒后、断剑
- **动机关键词**：面子、名誉、形象、尊严、好面子、维护

### 高级技巧
- 观察角色压力等级变化，压力越高越容易露出破绽
- 不同证物对不同角色的效果不同
- 重复调查同一区域不会获得新证物
- 对话记录会跨session保存，可以多次游戏

## 🔧 故障排除

### 常见问题

#### 游戏无法加载
- 检查所有文件是否完整下载
- 确保浏览器支持现代JavaScript特性
- 尝试使用本地服务器而非直接打开文件

#### AI功能不工作
- 检查API密钥是否正确配置
- 确认网络连接正常
- 查看浏览器控制台错误信息

#### 语音功能无声音
- 确保勾选了"启用语音回复"
- 检查API密钥配置
- 确认浏览器允许音频播放

#### 图片显示问题
- 确保images文件夹及所有图片文件存在
- 检查图片路径是否正确
- 尝试刷新页面

### 浏览器兼容性
- ✅ Chrome 80+
- ✅ Firefox 75+
- ✅ Safari 13+
- ✅ Edge 80+
- ❌ Internet Explorer

## 📱 响应式设计

游戏支持多种设备：
- 🖥️ **桌面端**：完整功能体验
- 📱 **移动端**：适配触摸操作
- 📟 **平板端**：优化布局显示

## 🎨 自定义配置

### 修改角色对话
编辑 `script.js` 中的 `suspects` 对象：
```javascript
const suspects = {
    characterId: {
        name: "角色名称",
        personality: "性格描述",
        initialStatement: "初始证词",
        secrets: {
            truth: "真实情况",
            motive: "撒谎动机"
        }
    }
}
```

### 添加新证物
在 `sceneClues` 对象中添加：
```javascript
"线索名称": {
    result: "调查结果描述",
    evidence: {
        id: "唯一标识",
        name: "证物名称", 
        description: "证物描述",
        image: "图片路径"
    }
}
```

### 修改语音设置
在 `VOICE_CONFIG` 中配置角色音色：
```javascript
CHARACTER_VOICES: {
    'characterId': 'voice_model_id'
}
```

## 📄 许可证

本项目仅供学习和娱乐使用。基于《罗生门》原著进行改编创作。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进游戏体验！

## 📞 支持

如果遇到问题或有改进建议，请：
1. 查看故障排除部分
2. 检查浏览器控制台错误信息
3. 提交Issue描述具体问题

---

**享受你的推理之旅！** 🔍✨